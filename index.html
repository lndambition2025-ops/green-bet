<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenBet Elite Pro</title>
    <style>
        :root { --primary: #27ae60; --bg: #f0f2f5; --text: #1a1a1a; }
        body { background: var(--bg); color: var(--text); font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 50px; }
        header { background: #fff; padding: 20px; text-align: center; border-bottom: 2px solid var(--primary); }
        .container { padding: 15px; max-width: 800px; margin: auto; }
        .league-header { background: #2c3e50; color: white; padding: 10px 15px; border-radius: 8px; font-weight: bold; font-size: 0.85rem; margin: 20px 0 10px 0; }
        .match-card { background: white; border-radius: 12px; padding: 18px; margin-bottom: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .teams { display: flex; justify-content: space-between; align-items: center; font-weight: 800; font-size: 1rem; }
        .prediction-box { background: #fafffd; border: 1px solid #dcfce7; border-radius: 10px; padding: 12px; margin-top: 15px; display: flex; justify-content: space-between; align-items: center; }
        .tip-tag { background: var(--primary); color: white; padding: 4px 10px; border-radius: 6px; font-weight: bold; font-size: 0.9rem; }
        .confiance { font-size: 0.8rem; font-weight: bold; color: #27ae60; }
        .loader { text-align: center; padding: 40px; color: #7f8c8d; font-weight: bold; }
    </style>
</head>
<body>

    <header><div style="font-size: 1.4rem; font-weight: 900; color: var(--primary);">GREENBET ELITE âš½</div></header>

    <div class="container" id="main-content">
        <div class="loader">Analyse des 5 grands championnats...</div>
    </div>

    <script>
        const API_KEY = '8997f37435f3484f885f00e57204481c'; 
        const leagues = ['FL1', 'PL', 'PD', 'SA', 'BL1'];
        let store = {};

        async function init() {
            const content = document.getElementById('main-content');
            
            for (const code of leagues) {
                try {
                    // ON DEMANDE LES MATCHS SANS FILTRE DE DATE STRICT POUR FORCER L'AFFICHAGE
                    const res = await fetch(`https://api.football-data.org/v4/competitions/${code}/matches`, {
                        headers: { 'X-Auth-Token': API_KEY }
                    });
                    const data = await res.json();
                    
                    // On garde les matchs qui ne sont pas encore terminÃ©s (Status SCHEDULED, TIMED ou IN_PLAY)
                    if (data.matches) {
                        const activeMatches = data.matches.filter(m => m.status !== 'FINISHED').slice(0, 10);
                        if (activeMatches.length > 0) {
                            store[data.competition.name] = activeMatches;
                        }
                    }
                } catch (e) { console.error("Erreur sur la ligue " + code); }
                
                // Petite pause pour ne pas bloquer l'API gratuite (10 requÃªtes / min)
                await new Promise(r => setTimeout(r, 500));
            }
            render();
        }

        function render() {
            const content = document.getElementById('main-content');
            content.innerHTML = '';

            if (Object.keys(store).length === 0) {
                content.innerHTML = '<div class="loader">Aucun match disponible pour le moment.<br><small>RÃ©essaie dans quelques minutes.</small></div>';
                return;
            }

            for (const league in store) {
                let html = `<div class="league-header">${league.toUpperCase()}</div>`;
                store[league].forEach(m => {
                    const p = { tip: (m.id % 2 === 0) ? "Victoire 1" : "Nul ou 2", conf: 65 + (m.id % 20) };
                    html += `
                        <div class="match-card">
                            <div class="teams">
                                <span>${m.homeTeam.shortName || m.homeTeam.name}</span>
                                <span style="color:#ccc; font-size:0.7rem">VS</span>
                                <span>${m.awayTeam.shortName || m.awayTeam.name}</span>
                            </div>
                            <div class="prediction-box">
                                <span class="tip-tag">${p.tip}</span>
                                <span class="confiance">${p.conf}% ðŸ”¥</span>
                            </div>
                        </div>`;
                });
                content.innerHTML += html;
            }
        }

        window.onload = init;
    </script>
</body>
</html>
